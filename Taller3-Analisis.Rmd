---
title: "Consumo hogares crisis 2008"
author: "Alejandra Mancipe -Santiago Villamil"
date: "11/5/2021"
output: pdf_document
---


```{r}
library(wbstats)
library(tidyverse)
library(readr)
library(dplyr)
library(stargazer)
library(pastecs)
library(writexl)
library(ggplot2)
```

#descargando las bases de datos
con el fin de evaluar el impacto en el consumo de los hogares, se van a llamar las variables a usar que pueden servir para evaluar el impacto en el consumo de los hogares. Para ello, vamos a llamar las bases de datos para las variabes dependientes:*consumo *,y las variables independientes: *ingreso nacional bruto per cápita*,*Desempleo total(% participació total en la fuerza laboral**PIB per cápita(US $ a precios constantes de 2010* para los años 2006 al 2010; es decir 2 años antes de la crisis del 2008 y dos años posteriores a la crisis. Entre estos, se seleccionaron 16 paises siendo unos desarrollados y en vias de desarrollo provenientes de los disferentes continentes del mundo.

```{r}
data <- wb_data(c("NE.CON.PRVT.PC.KD","NY.GNP.PCAP.KD","SL.UEM.TOTL.ZS","NY.GDP.PCAP.KD"), start_date = 2006, end_date = 2010)
data <- select(data, iso3c, country, date, NE.CON.PRVT.PC.KD, NY.GNP.PCAP.KD, SL.UEM.TOTL.ZS, NY.GDP.PCAP.KD)
data <- data %>% filter(str_detect(iso3c, "USA|COL|BOL|MEX|DEU|ROU|FRA|GBR|ZAF|GHA|NGA|
|JPN|CHN|VNM|KOR|AUS"))
colnames(data) <- c("iso3c", "country", "date", "consum", "income", "unemp", "gdppc")
```

#Asegurandonos de que las variables esten adecuadamente identificadas según su tipo 
```{r}
class(data$consum)
```
#Realizando la tabla de estadisticas descriptivas
```{r}
stargazer(as.data.frame(data), type = "text", 
          out = "tabla1.tex", 
          title = "Tabla 1 - Estadística Descriptiva",
          digits = 1, 
          covariate.labels = c( "AÑO","CONSUMO HOGARES", 
                               "INGRESO PC", 
                               "DESEMPLEO","GDP") ,
          flip = TRUE)

```
#no se como hacerla
```{r}
ggplot(data, 
       mapping = aes(x = income)) + 
    geom_histogram(bins = "50")



ggplot(data, 
       mapping = aes( x = consum)) +
  geom_histogram(bins = "15")+
  scale_x_continuous(
    breaks = seq(from = 967, to = 33726, by = 5000)) 
  
ggplot(data, 
       mapping = aes( x = unemp)) +
  geom_histogram(bins = "5")
  

```

#correlaciones
se puede observar que para las variables ingreso per cáita y GDP per cápita, existe una fuerte correlación lineal entre la variable dependiente consumo
```{r}
variables <- data %>% select("consum":"gdppc")
cor(variables)
```



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
